@using Radzen.Blazor;
@using Arboretum.Frontend.Data;

<RadzenStack>
    <RadzenRow>
        <RadzenTextBox Placeholder="Имя" @bind-Value=_userName/>
    </RadzenRow>

    <RadzenRow>
        <RadzenTextBox Placeholder="Почта" @bind-Value=_email/>
    </RadzenRow>

    <RadzenRow>
        <RadzenTextBox Placeholder="Телефон" @bind-Value=_phone/>
    </RadzenRow>

    <RadzenRow>
        <RadzenPassword Placeholder="Пароль" @bind-Value=_pswd />
    </RadzenRow>

    <RadzenRow>
        <RadzenPassword Placeholder="Повторите пароль"  @bind-Value=_repeatPswd/>
    </RadzenRow>

    <RadzenRow>
        <RadzenButton Text="Создать аккаунт" Click="RegisterAccount"/>
    </RadzenRow>

</RadzenStack>

@code {
    private string _pswd;
    private string _repeatPswd;
    private string _userName;
    private string _email;
    private string _phone;

    private void RegisterAccount()
    {
        if (_repeatPswd != _pswd)
        {
            return;
        }

        var loginId = ApiInteractor.RegisterUser(_email, _pswd, _phone);
        User.SetUserInfo(_email, loginId);
    }
}
