@using Radzen.Blazor
@using Radzen;
@using Arboretum.Frontend.Data;

<RadzenStack>

    <RadzenRow>
        <RadzenTextBox Placeholder="Id растения" Style="margin-bottom:50px" @bind-Value=_plantId />
    </RadzenRow>
    <RadzenRow>
        <InputFile Text="Выбрать фотографию" OnChange="LoadPictures" />
    </RadzenRow>
    <RadzenRow>
        <RadzenButton Text="Загрузить" Click=Upload></RadzenButton>
    </RadzenRow>
</RadzenStack>

@code {
    private string _plantId;
    private IReadOnlyList<IBrowserFile> _pictures;

    private void LoadPictures(InputFileChangeEventArgs e)
    {
        _pictures = e.GetMultipleFiles();
        this.StateHasChanged();
    }

    private void Upload()
    {
        foreach (var file in _pictures)
        {
            ApiInteractor.LoadPicture(file, _plantId);
        }
    }
}
